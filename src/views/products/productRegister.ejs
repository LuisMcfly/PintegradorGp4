<%- include('../partials/head.ejs') %>

<head>
  <title>Pegasus Tech | Crear producto</title>
</head>

<body>
  <%- include('../partials/header.ejs') %>

  <main class="container flex flex--column flex--center">
    <section class="cartao">
      <h2 class="card__title">Registrar producto</h2><!-- dice que si el controlador envio variables locales y so dentro de esas variables hay un mensaje de error se itere -->
      <% if(errors) { %> 
        <% for(let error in errors) { %> 
          <p><%= errors[error].msg %> </p>
        <% } %> 
      <% } %> 
      <form action="/products/productRegister" method="post" enctype="multipart/form-data"
        class="formulario flex flex--column" >
        <fieldset>
          <div class="input-container">
            <input name="name" id="name" type="text" value="<%= datos.name ? datos.name : "" %>">
            <label class="input-label" for="name">Nombre del producto <i class="fas fa-file-signature"></i></label>
          </div>
          
          <div class="input-container">
            <label class="input-label manufacturer">Nombre del fabricante <i class="fa-solid fa-check"></i></label>
            <select name="manufacturer" class="input">
              <% manofacturers.forEach(manofacturer => {%>
                <option class="option" value="<%= manofacturer.dataValues.id %>">
                  <%= manofacturer.dataValues.name %> 
                </option>
              <% }) %>
            </select>
          </div> 
          <div class="input-container">
            <input name="model" id="model" class="input" type="text" placeholder="Modelo" value="<%= datos.model ? datos.model : "" %>">
            <label class="input-label" for="model">Modelo del producto 
              <i class="fas fa-file-signature"></i></label>
          </div>
          
          <div class="input-container">
            <label class="input-label" for="variaciones">Variaciones del producto<i class="fas fa-file-signature"></i></label>
            <select name="variations" id="variations" class="input">
              <% features.forEach(feature => {%>
                <option class="option" value="<%= feature.dataValues.id %> ">
                  <%= feature.dataValues.name %> 
                </option>
              <% }) %>
            </select>
          </div>

          <div class="list-choice">
            <div class="list-choice-title">Seleccione la Categoria <i class="fa-solid fa-layer-group"></i></div>
            <div class="list-choice-objects">
              <select name="category" value="portatiles">
                <% categorys.forEach(category => {%>
                  <option class="option" value="<%= category.dataValues.id %> ">
                    <%= category.dataValues.name %> 
                  </option>
                <% }) %>
              </select>
            </div>
          </div>
          
          <div class="textarea-container">
            <textarea name="description" id="descripcion" class="textarea" type="text" placeholder="descripcion" ><%= datos.description ? datos.description : "" %></textarea>
            <label class="textarea-label" for="descripcion">Descripcion del producto 
              <i class="fas fa-file-signature"></i></label>
          </div>
          
          <div class="input-container">
            <input name="price" id="precio" class="input" type="text" placeholder="Precio" value="<%= datos.price ? datos.price : "" %>">
            <label class="input-label" for="precio">Precio del producto <i class="fas fa-dollar-sign"></i></label>
          </div>

          <div class="input-container">
            <input name="discount" id="descuento" class="input" type="text" placeholder="Descuento" value="<%= datos.discount ? datos.discount : "" %>">
            <label class="input-label" for="descuento">Descuento del producto <i class="fas fa-percent"></i></label>
          </div>

          <div class="input-container">
            <input name="stock" id="stock" class="input" type="text" placeholder="Descuento" value="<%= datos.stock ? datos.stock : "" %>">
            <label class="input-label" for="stock">Stock del producto <i class="fab fa-stack-overflow"></i></label>
          </div>

          <div class="input-container">
            <label class="input-label file" for="imagen">Seleccione la imágen del producto 
              <i class="fa-solid fa-camera"></i></label>
            <input name="images" id="images" class="input-file" type="file" multiple placeholder="Imágen" >
          </div>
        </fieldset>

        <button class="button">Registrar</a>
      </form>

    </section>
  </main>

  <%- include('../partials/footer') %>
  <script src="" type="module"></script><!-- script de las validaciones -->
</body>
</html>